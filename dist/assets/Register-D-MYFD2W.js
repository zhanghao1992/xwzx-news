import{c as C,a as s,b as o,w as p,d as v,r as t,e as c,u as S,o as U}from"./index-D6XfGlWg.js";import{u as q}from"./user-bSK34LHc.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as l}from"./function-call-DfxdXIrz.js";import"./index-C0Zqfgkc.js";import"./api-CqIw8Mru.js";import"./mount-component-CAUN_HIz.js";const L={class:"register-page"},N={class:"register-container"},P={class:"register-logo"},R={class:"submit-btn"},T={__name:"Register",setup(j){const u=S(),_=q(),i=c(""),n=c(""),m=c(""),g=()=>n.value===m.value,f=async()=>{l({type:"loading",message:"注册中...",forbidClick:!0,duration:0});try{const a=await _.register({username:i.value,password:n.value});a.success?(l({type:"success",message:a.message}),u.push("/")):l({type:"fail",message:a.message})}catch{l({type:"fail",message:"注册失败，请稍后再试"})}},b=()=>{u.back()},w=()=>{u.push("/login")};return(a,e)=>{const y=t("van-nav-bar"),V=t("van-image"),d=t("van-field"),k=t("van-cell-group"),h=t("van-button"),x=t("van-form");return U(),C("div",L,[s(y,{title:"用户注册","left-arrow":"",onClickLeft:b,fixed:""}),o("div",N,[o("div",P,[s(V,{width:"80",height:"80",src:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg",round:""}),e[3]||(e[3]=o("h2",null,"新闻资讯",-1))]),s(x,{onSubmit:f,class:"register-form"},{default:p(()=>[s(k,{inset:""},{default:p(()=>[s(d,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=r=>i.value=r),name:"username",label:"用户名",placeholder:"请输入用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),s(d,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=r=>n.value=r),type:"password",name:"password",label:"密码",placeholder:"请输入密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),s(d,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=r=>m.value=r),type:"password",name:"confirmPassword",label:"确认密码",placeholder:"请再次输入密码",rules:[{required:!0,message:"请确认密码"},{validator:g,message:"两次密码不一致"}]},null,8,["modelValue","rules"])]),_:1}),o("div",R,[s(h,{round:"",block:"",type:"primary","native-type":"submit",size:"large"},{default:p(()=>[...e[4]||(e[4]=[v(" 注册 ",-1)])]),_:1})]),o("div",{class:"login-link"},[e[5]||(e[5]=v(" 已有账号？",-1)),o("span",{onClick:w},"去登录")])]),_:1})])])}}},H=B(T,[["__scopeId","data-v-39644922"]]);export{H as default};
