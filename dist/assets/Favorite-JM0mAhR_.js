import{h as F,c as i,a as l,p as v,F as b,j as x,n as B,u as D,r as c,o as a,w as L,b as s,s as N,t as r}from"./index-D6XfGlWg.js";import{u as A}from"./favorite-DUwoJoJa.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as u}from"./function-call-DjmNWhop.js";import"./index-C0Zqfgkc.js";import"./user-bSK34LHc.js";import"./api-CqIw8Mru.js";import"./mount-component-CAUN_HIz.js";const T={class:"favorite-container"},V={key:0,class:"favorite-list"},$={class:"news-item"},R={key:0,class:"news-image"},j=["src","alt"],z={class:"news-info"},E={class:"news-title"},I={class:"news-meta"},M={__name:"Favorite",setup(q){const _=D(),o=A(),m=()=>{_.back()},p=e=>{_.push(`/news/detail/${e}`)},d=async e=>{(await o.removeFavoriteApi(e)).success&&o.removeFavorite(e)},f=e=>{u({title:"提示",message:"确定要删除这条收藏吗？",showCancelButton:!0}).then(n=>{n==="confirm"&&d(e)})},h=async()=>{u({title:"提示",message:"确定要清空所有收藏吗？",showCancelButton:!0}).then(async e=>{if(e==="confirm"){const n=await o.clearFavoritesApi();(!n||!n.success)&&console.log("清空收藏列表")}})};return F(async()=>{try{const e=await o.getFavoriteListApi();(!e||!e.success)&&console.log("从本地存储加载收藏列表")}catch{o.loadFavorites()}}),(e,n)=>{const g=c("van-nav-bar"),k=c("van-cell"),w=c("van-button"),C=c("van-empty");return a(),i("div",T,[l(g,{title:"我的收藏","left-text":"返回","left-arrow":"",onClickLeft:m,"right-text":"清空",onClickRight:h,fixed:""}),v(o).getFavorites.length?(a(),i("div",V,[(a(!0),i(b,null,x(v(o).getFavorites,t=>(a(),i("div",{class:"favorite-item",key:t.id},[l(k,{onClick:y=>p(t.id),border:!1},{title:L(()=>[s("div",$,[t.image?(a(),i("div",R,[s("img",{src:t.image,alt:t.title},null,8,j)])):N("",!0),s("div",z,[s("div",E,r(t.title),1),s("div",I,[s("span",null,r(t.author),1),s("span",null,r(t.publishTime),1),s("span",null,"收藏时间: "+r(t.favoriteTime),1)])])])]),_:2},1032,["onClick"]),l(w,{class:"delete-btn",type:"danger",size:"mini",icon:"cross",onClick:y=>f(t.id)},null,8,["onClick"])]))),128))])):(a(),B(C,{key:1,description:"暂无收藏内容"}))])}}},W=S(M,[["__scopeId","data-v-ac892b87"]]);export{W as default};
